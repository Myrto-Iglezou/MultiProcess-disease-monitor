
	      ΠΑΝΕΠΙΣΤΗΜΙΟ ΑΘΗΝΩΝ
    Τμήμα Πληροφορικής και Τηλεπικοινωνιών
	Κ24:Προγραμματισμός Συστήματος
		   2η Εργασία


Όν/μο:  Ιγγλέζου Μυστώ
Α.Μ.: 1115201700038

Εντολή Μεταγλώττισης: make
Εντολή εκτέλεσης: ./diseaseAggregator -w 5 -b 256 -i inputDir

Όπου οι σημαίες δηλώνουν αυτά που ζητήθηκαν στην εκφώνηση της εργασίας.

Σχεδιαστικές επιλογές:

-Ολα τα ερωτήματα υπολογίζονται στους workers και τα αποτελέσματα
 στέλνονται στον πατέρα μέσω named pipe, εκτός από το /listCountries.

-Για την επικοινωνία ανάμεσα σε πατέρα και παιδιά ακολουθήθηκε ο τρόπος
που προτείνεται στην εκφώνηση. Δηλαδή, δύο named pipes, ένα που γράφει ο 
πατέρας και διαβάζουν τα παιδιά και ένα για κάθε παιδί, όπου εκείνο γράφει
και ο πατέρας διαβάζει. Αυτός που γράφει πάντα στέλνει πρώτα το μέγεθος 
του μηνύματος που ακολουθεί. 

-Τα pipes είναι blocking. Δεν χρησιμοποιήθηκε η select().
Τα μηνύμα απο τον πατέρα στέλνονται σε ένα loop για κάθε worker και 
διαβάζονται σε ένα άλλο.

-Στους workers η αποθήκευση των εγγραφών γίνεται σε red black tree, το
οποίο έχει πολυπλοκότητα αναζήτησης και εισαγωγής, τόσο στην μέση, όσο και
στην χειρότερη περίπτωση O(logn).

-Οι ημερομηνίες που δέχεται στο πρόγραμμα στην είσοδο είναι της μορφής:
DD-MM-YYYY
Για να γίνει ο έλεγχος των διαστημάτων εξετάζεται αν η ημερομηνία
εισαγωγής είναι μέσα στο διάστημα που ζητήθηκε.

-Για το topk υλοποιείται κάθε φορά ένα binary maxheap, όπου το μονοπάτι
προς τον ζητούμενο κόμβο βρίσκεται με βάση την δυαδική αναπαράσταση του
αριθμού της ζητούμενης θέσης. Με την απομόνωση των κατάλληλων ψηφίων κάθε
φόρα θεωρούμε για 0 το αριστερά και 1 το δεξιά. Κάθε κόμβος του δέντρου
περιέχει τον αριθμό των κρουσμάτων και το όνομα είτε του ιού είτε της
πόλης και δείκτες στο δεξί και αριστερό παιδί, και στον πατέρα.

-Τα Signals υλοποιήθηκαν όπως ζητήθηκε στην εκφώνηση. Ο Handler αλλάζει μόνο 
κάποα global volatile sigatomic_t flags. Στην περίπτωση που στέλνεται καποιο 
SIGUSR1 στο παιδι, τότε εκείνο στέλνει SIGUSR1 στον πατέρα για να διαβάσει τα
στατιστικά.

-Όταν ο πατέρας ή τα παιδιά γράφουν ή διαβάζουν, τα signals μπλοκάρονται με την
χρήση της sigprocmask.

-Το Script υλοποιήθηκε όπως ζητήθηκε. Δημιουργεί και λάθη.




